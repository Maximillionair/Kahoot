<%- include('../partials/header') %>

<div class="game-lobby">
  <h1>Game Lobby</h1>
  
  <div class="game-info">
    <h2><%= quiz.title %></h2>
    <div class="pin-display">
      <h3>Game PIN: <span class="game-pin"><%= game.pin %></span></h3>
    </div>
  </div>
  
  <% if (player) { %>
    <div class="player-status">
      <div class="player-welcome">
        <h3>Welcome, <%= player.username %>!</h3>
        <p>You've successfully joined the game</p>
      </div>
      
      <div class="waiting-status">
        <h3>Waiting for host to start...</h3>
        <div class="loader">
          <div class="spinner"></div>
        </div>
      </div>
      
      <div class="player-list">
        <h3>Players in game: <span id="player-count">0</span></h3>
        <ul id="players"></ul>
      </div>
    </div>
  <% } %>
</div>

<!-- Hidden data for socket.io -->
<div id="game-data" 
  data-game-id="<%= game._id %>" 
  data-is-host="false" 
  data-username="<%= player ? player.username : '' %>">
</div>

<script src="/socket.io/socket.io.js"></script>
<script src="/js/game.js"></script>

<%- include('../partials/footer') %>